---
published: true
categories: algorithm
title: '[algorithm] flody warshall'
---
최단 거리 알고리즘 중 모든 노드간의 최단 거리를 계산하는 알고리즘인 flody warshall 은 3중 루프를 사용하여 계산을 하게된다.
i -> j (현재 노드 i 에서 노드 j 로 가는 최단 경로) 보다 k를 경유해서 가는 경로 ( i->k + k->j)가 최단 거리이면 update 한다.
모든 경로에 대해서 k 를 거처가는 경로를 고려하기 때문에 i, j, k 3중 루프를 구성하여 최단거리를 계산한다.
그런데 경유지인 k 루프가 가장 바깥쪽에 있도록 루프를 구성해야 하는 주의점이 있다.
왜 k 루프가 가장 마지막에 있어야 하는 것일까 ?

flody warshall 알고리즘은 dynamic programming 이다.
dp[i][j] 를 i 에서 j 로 최단 거리를 저장한다고 하자.
초기값은 주어진 간선으로 i->j 로 직접 이동 가능한 경로에 해당하는 값을 저장한다.

1. 노드 갯수 N 에 대해서 1...N 까지 수행을 하는데 k 단계를 수행할때는 1....(k-1) 간선을 중간지점으로 포함하는 경우를 고려한 최단거라가 dp[i][j] 에 저장되어 있게 된다.
2. k 번째 단계에서 i 에서 j로 가는 경로중 k 를 중간지점으로 포함하는 경로와 k를 포함하지 않는 경우를 비교하여 최단 거리를 업데이트 하게된다.

따라서 각 단계에서 모든 i->j 경로에 대한 최단 거리를 업데이트해야함으로 k loop가 가장 마지막에 있어야한다.